module.exports = {
    random_by_category: "select RANDOM() * r.price as randomweight, r.* from ritems r  where itemcategory = $1 order by randomweight asc  limit 1",
    random: "select RANDOM() * i.price, i.* from ritems i CROSS JOIN (SELECT itemcategory, RANDOM() * sum(price) as total FROM ritems CROSS JOIN (SELECT SUM(price) AS totalprice FROM ritems) t group by itemcategory order by total asc limit 1) ic where i.itemcategory = ic.itemcategory order by total asc limit 1;",
    semi_random: "select * from (select RANDOM() * (ic.total / i.price) as randomprice, minMax.min * i.price as minPrice, minMax.max * i.price as maxPrice, i.* from ritems i CROSS JOIN (SELECT sum(price) as total FROM ritems CROSS JOIN (SELECT SUM(price) AS totalprice FROM ritems) t order by total asc limit 1) ic join (select min(multiplier) as min, max(multiplier) as max, itemid from rmaterial m join (select material, itemid from ritemmaterials group by itemid, material) im on im.material = m.materialcategory  where multiplier > 0 group by itemid)  minMax on minMax.itemid = i.id where (minMax.min * i.price) <= $1 and (minMax.max * i.price) >= $1) finalTable order by randomPrice",
    with_price: "select * from  (select RANDOM() * (ic.total / i.price) as randomprice, minMax.min * i.price as minPrice, minMax.max * i.price as maxPrice, i.* from ritems i CROSS JOIN (SELECT sum(price) as total FROM ritems CROSS JOIN (SELECT SUM(price) AS totalprice FROM ritems) t order by total asc limit 1) ic join (select min(multiplier) as min, max(multiplier) as max, itemid from rmaterial m join (select material, itemid from ritemmaterials group by itemid, material) im on im.material = m.materialcategory  where multiplier > 0 group by itemid)  minMax on minMax.itemid = i.id ) finalTable order by randomPrice",
    loot_armor: "select * from ritems where concat(itemcategory, size) = $1 order by random() limit 1",
    loot_by_category: "select * from ritems where itemcategory = $1 order by random() limit 1"
}